<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Implementation of ROS Java on the Sami-Crw Software &mdash; Platypus Lutra Documentation 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Platypus Lutra Documentation 1.0 documentation" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="implementation-of-ros-java-on-the-sami-crw-software">
<h1>Implementation of ROS Java on the Sami-Crw Software<a class="headerlink" href="#implementation-of-ros-java-on-the-sami-crw-software" title="Permalink to this headline">¶</a></h1>
<p>First ensure you are running the Java JDK 8 on Netbeans. The following instructions are assuming the original software package (from: <a class="reference external" href="https://github.com/nbbrooks">https://github.com/nbbrooks</a> ) is successfully installed and compiled on Netbeans (per the installation tutorial).</p>
<p>The next step is to import into Netbeans as a new project the revised code with the ROSJava functionality added to it. This code can be found on <a class="reference external" href="https://github.com/nrjl/sami-crw/tree/ROScomms">https://github.com/nrjl/sami-crw/tree/ROScomms</a>.</p>
<div class="section" id="installing-rosjava">
<h2>Installing ROSJava<a class="headerlink" href="#installing-rosjava" title="Permalink to this headline">¶</a></h2>
<p>Install ROSJava onto the host computer. The lab currently uses ROS Indigo on Ubuntu 14.04. If you do not have ROS, you must first install it in order to get ROSJava. See: <a class="reference external" href="http://wiki.ros.org/indigo/Installation/Ubuntu">http://wiki.ros.org/indigo/Installation/Ubuntu</a> for the ROS installation instructions.</p>
<p>Once you have ROS installed, or have checked that it was installed previously and you are running Indigo, you may now install ROSJava. See: <a class="reference external" href="http://wiki.ros.org/rosjava/Tutorials/indigo/Installation">http://wiki.ros.org/rosjava/Tutorials/indigo/Installation</a> for instructions for installing ROSJava. Select the “Source” install option, as this will later allow you to import ROSJava packages into Netbeans.</p>
</div>
<div class="section" id="importing-packages-into-netbeans">
<h2>Importing Packages into Netbeans<a class="headerlink" href="#importing-packages-into-netbeans" title="Permalink to this headline">¶</a></h2>
<p>In Netbeans, in the sami-crw folder in the ‘Project’ tab, select ‘Libraries’. Right click on ‘Libraries’ and select ‘ADD JAR/Folder..’. This will open to a new screen where you can select which JAR files to import to Netbeans. Navigate to the folder where you have stored all ROSJava files.
The folder which will contain the necessary JAR files for the standard ROSJava edition is:
/rosjava/src/rocon_rosjava_core/master_info/build/install/master_info/lib</p>
<p>Import all the JAR files in this folder:</p>
<p>actionlib_msgs-1.11.8.jar
apache_xmlrpc_client-0.2.1.jar
apache_xmlrpc_common-0.2.1.jar
apache_xmlrpc_server-0.2.1.jar
commons-pool-1.6.jar
com.springsource.org.apache.commons.codec-1.3.0.jar
com.springsource.org.apache.commons.httpclient-3.1.0.jar
com.springsource.org.apache.commons.io-1.4.0.jar
com.springsource.org.apache.commons.lang-2.4.0.jar
com.springsource.org.apache.commons.logging-1.1.1.jar
com.springsource.org.apache.commons.net-2.0.0.jar
dnsjava-2.1.1.jar
geometry_msgs-1.11.8.jar
gradle_plugins-0.2.1.jar
guava-12.0.jar
jsr305-1.3.9.jar
junit-3.8.2.jar
master_info-0.2.0.jar
message_generation-0.2.1.jar
nav_msgs-1.11.8.jar
netty-3.5.2.Final.jar
rocon_service_pair_msgs-0.7.10.jar
rocon_std_msgs-0.7.10.jar
rosgraph_msgs-1.11.1.jar
rosjava-0.2.1.jar
rosjava_test_msgs-0.2.1.jar
rosjava_utils-0.2.0.jar
std_msgs-0.5.9.jar
tf2_msgs-0.5.11.jar
uuid_msgs-1.0.5.jar
ws-commons-util-1.0.1.jar
xml-apis-1.0.b2.jar</p>
<p>Our code utilizes a message package, which does not come automatically with the standard ROSJava installation. You must retrieve this package in order to get the geography messages JAR into Netbeans.</p>
<p>First to get the package, in a new terminal window, run:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo apt-get install ros-indigo-geographic-info
</pre></div>
</div>
<p>Then you need to generate the rosjava versions of those messages. You need genjava:</p>
<div class="highlight-python"><div class="highlight"><pre>$ sudo apt-get install ros-indigo-genjava
</pre></div>
</div>
<p>To publish a waypoint you need to first load the messages by sourcing the java setup bash:</p>
<div class="highlight-python"><div class="highlight"><pre>$ source ~/rosjava/devel/setup.bash
</pre></div>
</div>
<p>Then naviage to rosjava folder (wherever it is on your computer):</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd ~/rosjava
$ genjava_message_artifacts --verbose
</pre></div>
</div>
<p>That should make a bunch of messages.</p>
<p>To import the geography messages JAR into Netbeans, following the same method as before, in the sami-crw folder in the ‘Project’ tab, select ‘Libraries’. Right click on ‘Libraries’ and select ‘ADD JAR/Folder..’. This will open to a new screen where you can select which JAR files to import to Netbeans. Then navigate to the following:
/rosjava/build/geographic_msgs/build/libs</p>
<p>Import the following JAR file:</p>
<p>geographic_msgs-0.4.0.jar</p>
</div>
<div class="section" id="test-the-rosjava-coupled-sami-crw-software">
<h2>Test the ROSJava coupled Sami-crw software<a class="headerlink" href="#test-the-rosjava-coupled-sami-crw-software" title="Permalink to this headline">¶</a></h2>
<p>To test the functionality of the code, run the application in Netbeans. MAKE SURE THAT A ROSCORE IS RUNNING IN A TERMINAL WINDOW. (To run a roscore, simply open a new terminal window and type “roscore” at the command line.)</p>
<p>Once the application has launched and you have the roscore running in the terminal, in the Mission Monitor, select the “Add Simulated Boat” plan and hit the “Run” button. Add a SINGLE simulated boat at any point on the map of Waverly Lake. NOTE: You must make sure to change the “Number of boats” field to 1 from the default of 3.</p>
<p>First check that the Publisher and Subscriber node have been declared and instantiated. To do this, open a new tab in terminal and run: rostopic list
You should see the following:
/crw_waypoint_sub
/crw_geopose_pub
/clear_waypoints
/rosout
/rousout_agg</p>
<p>Then try in a terminal window:</p>
<div class="highlight-python"><div class="highlight"><pre>$ rostopic pub -1 /crw_waypoint_sub geographic_msgs/GeoPose &#39;{position: {latitude: 44.642, longitude: -123.065, altitude: 0.0}, orientation: {x: 0.0, y: 0.0, z: 0.0, w: 1.0}}&#39;
</pre></div>
</div>
<p>This should publish 1 message of type GeoPose to the /crw_waypoint_sub topic.</p>
<p>To clear this waypoint, type the following:</p>
<div class="highlight-python"><div class="highlight"><pre>$ rostopic pub -1 /clear_waypoints std_msgs/String ‘clear’
</pre></div>
</div>
<p>This will publish 1 message of type String to the /clear_waypoints topic. It will stop the boat on its course to the current waypoint.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Implementation of ROS Java on the Sami-Crw Software</a><ul>
<li><a class="reference internal" href="#installing-rosjava">Installing ROSJava</a></li>
<li><a class="reference internal" href="#importing-packages-into-netbeans">Importing Packages into Netbeans</a></li>
<li><a class="reference internal" href="#test-the-rosjava-coupled-sami-crw-software">Test the ROSJava coupled Sami-crw software</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/rosjava.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, RDML.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/rosjava.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>